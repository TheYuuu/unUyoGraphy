/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkun_u_yo"] = self["webpackChunkun_u_yo"] || []).push([["example_demo_axisHeatMap_index_tsx"], {

/***/ "./node_modules/d3-array/src/min.js":
/*!******************************************!*\
  !*** ./node_modules/d3-array/src/min.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

      "use strict";
      eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ min)\n/* harmony export */ });\nfunction min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n\n\n//# sourceURL=webpack://un-u-yo/./node_modules/d3-array/src/min.js?");

      /***/
    }),

/***/ "./example/demo/axisHeatMap/docs.ts":
/*!******************************************!*\
  !*** ./example/demo/axisHeatMap/docs.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

      "use strict";
      eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    chartsDesc: [\n        '对于二维分布场景的数据集来说，可以依靠热力图来观察其度量分布特征，此图例在热力图的表现形式上，增加两轴的统计，可以更加直观地观察到两个维度的分布情况',\n        '建议容器高宽比例4:5',\n        '出处链接: https://flowingdata.com/2019/12/16/grid-map-histogram-ggplot/'\n    ],\n    useDesc: [\n        '任意二维维度的分布数据'\n    ],\n    dataDesc: [\n        `\n    interface AxisHeatMapOptionData {\n      data: AxisHeatMapData[];\n      seriesX: string[]; // 数据中xPos的集合\n      seriesY: string[]; // 数据中yPos的集合\n    }\n\n    interface AxisHeatMapData {\n      value: number;\n      xPos: string | number;\n      yPos: string | number;\n    }\n  `\n    ],\n    optsData: [\n        {\n            key: '1',\n            params: 'mainColor',\n            desc: '图表默认的一致性主色调',\n            type: 'string',\n            default: 'rgb(107, 3, 24)'\n        }\n    ],\n    methodData: [\n        {\n            key: '1',\n            params: 'update',\n            desc: '更新数据',\n            type: `(data: AxisHeatMapOptionData) => void`,\n            default: '-'\n        }\n    ]\n});\n\n\n//# sourceURL=webpack://un-u-yo/./example/demo/axisHeatMap/docs.ts?");

      /***/
    }),

/***/ "./example/demo/axisHeatMap/index.tsx":
/*!********************************************!*\
  !*** ./example/demo/axisHeatMap/index.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

      "use strict";
      eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AxisHeatMapDemo)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ \"./node_modules/antd/es/button/index.js\");\n/* harmony import */ var _demoModel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../demoModel */ \"./example/demo/demoModel.tsx\");\n/* harmony import */ var _docs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./docs */ \"./example/demo/axisHeatMap/docs.ts\");\n/* harmony import */ var _packages_index__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/packages/index */ \"./packages/axisHeatMap/index.ts\");\n/* harmony import */ var _sample__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./sample */ \"./example/demo/axisHeatMap/sample.ts\");\n\n\n// import MarkdownContent from '@lib/markdownContent';\n// import contributing from './contributing.md';\n\n\n\n\nconst containerStyle = {\n    width: '350px',\n    height: '350px',\n    marginBottom: '20px'\n};\nfunction AxisHeatMapDemo() {\n    const [axisHeatMap, setAxisHeatMap] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n        setAxisHeatMap(new _packages_index__WEBPACK_IMPORTED_MODULE_4__.default({\n            dom: '#container',\n            mode: 'svg',\n            data: {\n                data: (0,_sample__WEBPACK_IMPORTED_MODULE_3__.default)().data,\n                seriesX: (0,_sample__WEBPACK_IMPORTED_MODULE_3__.default)().xPos,\n                seriesY: (0,_sample__WEBPACK_IMPORTED_MODULE_3__.default)().yPos\n            }\n        }));\n    }, []);\n    const update = () => {\n        if (axisHeatMap) {\n            axisHeatMap.update({\n                data: (0,_sample__WEBPACK_IMPORTED_MODULE_3__.default)().data,\n                seriesX: (0,_sample__WEBPACK_IMPORTED_MODULE_3__.default)().xPos,\n                seriesY: (0,_sample__WEBPACK_IMPORTED_MODULE_3__.default)().yPos\n            });\n        }\n    };\n    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"section\", null,\n        react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"section\", null,\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { id: \"container\", style: containerStyle }),\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_5__.default, { onClick: () => update(), type: \"primary\" }, \"update\")),\n        react__WEBPACK_IMPORTED_MODULE_0__.createElement(_demoModel__WEBPACK_IMPORTED_MODULE_1__.default, { docs: _docs__WEBPACK_IMPORTED_MODULE_2__.default })));\n}\n\n\n//# sourceURL=webpack://un-u-yo/./example/demo/axisHeatMap/index.tsx?");

      /***/
    }),

/***/ "./example/demo/axisHeatMap/sample.ts":
/*!********************************************!*\
  !*** ./example/demo/axisHeatMap/sample.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

      "use strict";
      eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"xPos\": () => (/* binding */ xPos),\n/* harmony export */   \"yPos\": () => (/* binding */ yPos),\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst xPos = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',\n    'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\nconst yPos = ['A1', 'B1', 'C1', 'D1', 'E1', 'F1', 'G1',\n    'H1', 'I1', 'J1', 'K1', 'L1', 'M1', 'N1', 'O1', 'P1', 'Q1', 'R1',\n    'S1', 'T1', 'U1', 'V1', 'W1', 'X1', 'Y1', 'Z1'];\nconst getData = () => {\n    return new Array(250).fill(0).map(() => {\n        return {\n            value: Number((Math.random() * 100).toFixed(0)),\n            xPos: xPos[Number((Math.random() * (xPos.length - 1)).toFixed(0))],\n            yPos: yPos[Number((Math.random() * (yPos.length - 1)).toFixed(0))]\n        };\n    });\n};\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {\n    return {\n        data: getData(),\n        xPos,\n        yPos\n    };\n}\n;\n\n\n//# sourceURL=webpack://un-u-yo/./example/demo/axisHeatMap/sample.ts?");

      /***/
    }),

/***/ "./packages/axisHeatMap/index.ts":
/*!***************************************!*\
  !*** ./packages/axisHeatMap/index.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

      "use strict";
      eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AxisHeatMap)\n/* harmony export */ });\n/* harmony import */ var _chartBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../chartBase */ \"./packages/chartBase.ts\");\n/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! d3-array */ \"./node_modules/d3-array/src/max.js\");\n/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! d3-array */ \"./node_modules/d3-array/src/min.js\");\n/* harmony import */ var d3_scale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! d3-scale */ \"./node_modules/d3-scale/src/linear.js\");\n/* harmony import */ var d3_scale__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! d3-scale */ \"./node_modules/d3-scale/src/ordinal.js\");\n/* harmony import */ var d3_transition__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-transition */ \"./node_modules/d3-transition/src/index.js\");\n\n\n\n\nclass AxisHeatMap extends _chartBase__WEBPACK_IMPORTED_MODULE_1__.default {\n    constructor(opt) {\n        super(opt);\n        this.data = {\n            data: [],\n            seriesX: [],\n            seriesY: [],\n        };\n        this.Opts = {\n            mainColor: \"rgb(107 3 24)\",\n            ...this._opts,\n        };\n        this.rectWidth = 0;\n        this.topXAxisWidth = 0;\n        this.leftScale = (0,d3_scale__WEBPACK_IMPORTED_MODULE_2__.default)();\n        this.lineHeight = 0;\n        this.topScale = (0,d3_scale__WEBPACK_IMPORTED_MODULE_2__.default)();\n        this.dotScale = (0,d3_scale__WEBPACK_IMPORTED_MODULE_2__.default)();\n        this.xPosAxis = (0,d3_scale__WEBPACK_IMPORTED_MODULE_3__.default)();\n        this.top_g = null;\n        this.left_g = null;\n        this.dot_g = null;\n        this.init();\n        this.update(opt.data);\n    }\n    handleData(data) {\n        const seriesXIndexMap = {};\n        const seriesYIndexMap = {};\n        const seriesXData = [];\n        const seriesYData = [];\n        for (let i = 0; i < data.seriesX.length; i++) {\n            seriesXIndexMap[data.seriesX[i]] = i;\n            seriesXData.push({\n                name: data.seriesX[i],\n                value: 0,\n            });\n        }\n        for (let i = 0; i < data.seriesY.length; i++) {\n            seriesYIndexMap[data.seriesY[i]] = i;\n            seriesYData.push({\n                name: data.seriesY[i],\n                value: 0,\n            });\n        }\n        const dataMap = {};\n        const dataArr = [];\n        for (let i = 0; i < data.data.length; i++) {\n            if (!dataMap[data.data[i].xPos]) {\n                dataMap[data.data[i].xPos] = {};\n            }\n            if (!dataMap[data.data[i].xPos][data.data[i].yPos]) {\n                dataMap[data.data[i].xPos][data.data[i].yPos] = 0;\n            }\n            dataMap[data.data[i].xPos][data.data[i].yPos] += data.data[i].value;\n            seriesXData[seriesXIndexMap[data.data[i].xPos]].value +=\n                data.data[i].value;\n            seriesYData[seriesYIndexMap[data.data[i].yPos]].value +=\n                data.data[i].value;\n        }\n        for (let k1 in dataMap) {\n            for (let k2 in dataMap[k1]) {\n                dataArr.push({\n                    value: dataMap[k1][k2],\n                    xPos: k1,\n                    yPos: k2,\n                });\n            }\n        }\n        this.data = {\n            data: dataArr,\n            seriesX: seriesXData,\n            seriesY: seriesYData,\n        };\n    }\n    init() {\n        this.lineHeight = this.containerHeight * 0.2;\n        if (!this.ctx) {\n            throw new Error(\"No useful ctx\");\n        }\n        this.top_g = this.ctx.append(\"g\");\n        this.left_g = this.ctx.append(\"g\");\n        this.dot_g = this.ctx.append(\"g\");\n    }\n    draw() {\n        const { lineHeight, top_g, left_g, dot_g } = this;\n        const topMaxX = (0,d3_array__WEBPACK_IMPORTED_MODULE_4__.default)(this.data.seriesX.map((v) => v.value));\n        if (topMaxX === undefined) {\n            throw new Error();\n        }\n        const topScale = (0,d3_scale__WEBPACK_IMPORTED_MODULE_2__.default)().domain([0, topMaxX]).range([0, lineHeight]);\n        const maxLen = this.containerHeight < this.containerWidth\n            ? this.containerHeight\n            : this.containerWidth;\n        const topXAxisWidth = maxLen * 0.7 - this.data.seriesX.length;\n        const rectWidth = topXAxisWidth / this.data.seriesX.length;\n        if (!top_g) {\n            return;\n        }\n        const topRects = top_g.selectAll(\".topRects\").data(this.data.seriesX);\n        this.rectWidth = rectWidth;\n        this.topScale = topScale;\n        this.updateTopRects(topRects);\n        const rightMaxY = (0,d3_array__WEBPACK_IMPORTED_MODULE_4__.default)(this.data.seriesY.map((v) => v.value));\n        if (rightMaxY === undefined) {\n            throw new Error();\n            return;\n        }\n        const leftScale = (0,d3_scale__WEBPACK_IMPORTED_MODULE_2__.default)()\n            .domain([0, rightMaxY])\n            .range([0, lineHeight]);\n        if (!left_g) {\n            return;\n        }\n        const leftRects = left_g.selectAll(\".leftRects\").data(this.data.seriesX);\n        this.topXAxisWidth = topXAxisWidth;\n        this.leftScale = leftScale;\n        this.updateLeftRects(leftRects);\n        const xPosAxis = (0,d3_scale__WEBPACK_IMPORTED_MODULE_3__.default)()\n            .domain(this.data.seriesX.map((v) => v.name))\n            .range(new Array(this.data.seriesX.length).fill(0).map((item, index) => index));\n        const dotR = rectWidth / 4;\n        const minDot = (0,d3_array__WEBPACK_IMPORTED_MODULE_5__.default)(this.data.data.map((v) => Number(v.value))) || 0;\n        const maxDot = (0,d3_array__WEBPACK_IMPORTED_MODULE_4__.default)(this.data.data.map((v) => Number(v.value))) || 0;\n        const dotScale = (0,d3_scale__WEBPACK_IMPORTED_MODULE_2__.default)()\n            .domain([minDot, maxDot])\n            .range([minDot === 0 ? 0 : dotR, dotR * 5]);\n        if (!dot_g) {\n            return;\n        }\n        const dots = dot_g.selectAll(\".dots\").data(this.data.data);\n        this.dotScale = dotScale;\n        this.xPosAxis = xPosAxis;\n        this.updateDots(dots);\n    }\n    updateTopRects(topRects) {\n        const { rectWidth, lineHeight, topScale } = this;\n        const enter = topRects.enter();\n        const exit = topRects.exit();\n        topRects\n            .transition()\n            .duration(this.Opts.duration)\n            .attr(\"x\", (d, i) => i * (rectWidth + 1))\n            .attr(\"y\", (d, i) => lineHeight - topScale(d.value))\n            .attr(\"width\", rectWidth)\n            .attr(\"height\", (d) => topScale(d.value));\n        enter\n            .append(\"rect\")\n            .attr(\"class\", \"topRects\")\n            .attr(\"fill\", this.Opts.mainColor)\n            .attr(\"transform\", `translate(${this.Opts.padding}, ${this.Opts.padding})`)\n            .attr(\"x\", (d, i) => i * (rectWidth + 1))\n            .attr(\"y\", (d, i) => lineHeight)\n            .attr(\"width\", rectWidth)\n            .attr(\"height\", 0)\n            .transition()\n            .duration(this.Opts.duration)\n            .attr(\"y\", (d, i) => lineHeight - topScale(d.value))\n            .attr(\"height\", (d) => topScale(d.value));\n        exit.transition().duration(this.Opts.duration).attr(\"height\", 0).remove();\n    }\n    updateLeftRects(leftRects) {\n        const { rectWidth, topXAxisWidth, leftScale } = this;\n        const enter = leftRects.enter();\n        const exit = leftRects.exit();\n        leftRects\n            .transition()\n            .duration(this.Opts.duration)\n            .attr(\"height\", rectWidth)\n            .attr(\"x\", topXAxisWidth)\n            .attr(\"y\", (d, i) => i * (rectWidth + 1) + this.containerHeight * 0.2)\n            .attr(\"width\", (d) => leftScale(d.value));\n        enter\n            .append(\"rect\")\n            .attr(\"class\", \"leftRects\")\n            .attr(\"height\", rectWidth)\n            .attr(\"x\", topXAxisWidth)\n            .attr(\"y\", (d, i) => i * (rectWidth + 1) + this.containerHeight * 0.2)\n            .attr(\"fill\", this.Opts.mainColor)\n            .attr(\"transform\", `translate(${this.Opts.padding + this.data.seriesX.length + rectWidth}, ${this.Opts.padding + rectWidth})`)\n            .transition()\n            .duration(this.Opts.duration)\n            .attr(\"width\", (d) => leftScale(d.value));\n        exit.remove();\n    }\n    updateDots(dots) {\n        const { rectWidth, lineHeight, dotScale, xPosAxis } = this;\n        const enter = dots.enter();\n        const exit = dots.exit();\n        dots\n            .transition()\n            .duration(this.Opts.duration)\n            .attr(\"cx\", (d) => Number(xPosAxis(String(d.xPos))) * (rectWidth + 1) + rectWidth / 2)\n            .attr(\"cy\", (d) => Number(xPosAxis(String(d.yPos))) * (rectWidth + 1) +\n            rectWidth / 2 +\n            lineHeight)\n            .attr(\"r\", (d) => dotScale(d.value));\n        enter\n            .append(\"circle\")\n            .attr(\"class\", \"dots\")\n            .attr(\"opacity\", \"0.5\")\n            .attr(\"cx\", (d) => Number(xPosAxis(String(d.xPos))) * (rectWidth + 1) + rectWidth / 2)\n            .attr(\"cy\", (d) => Number(xPosAxis(String(d.yPos))) * (rectWidth + 1) +\n            rectWidth / 2 +\n            lineHeight)\n            .attr(\"fill\", this.Opts.mainColor)\n            .attr(\"transform\", `translate(${this.Opts.padding}, ${this.Opts.padding + rectWidth})`)\n            .transition()\n            .duration(this.Opts.duration)\n            .attr(\"r\", (d) => dotScale(d.value));\n        exit.transition().duration(this.Opts.duration).attr(\"r\", 0).remove();\n    }\n    update(data) {\n        this.handleData(data);\n        this.draw();\n    }\n}\n\n\n//# sourceURL=webpack://un-u-yo/./packages/axisHeatMap/index.ts?");

      /***/
    })

}]);